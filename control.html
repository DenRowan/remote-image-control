<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Remote Image Control</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  font-family: system-ui, -apple-system, BlinkMacSystemFont;
  background: #111;
  color: #fff;
  text-align: center;
  margin: 0;
  padding: 20px;
}

h2 {
  margin-top: 30px;
}

.controls {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin: 10px 0 30px;
}

button {
  font-size: 28px;
  padding: 15px 25px;
  border-radius: 12px;
  border: none;
  cursor: pointer;
}

.left { background: #444; color: #fff; }
.right { background: #0a84ff; color: #fff; }
</style>
</head>

<body>

<h1>üì≤ Remote Image Control</h1>

<h2>Tablet 1</h2>
<div class="controls">
  <button class="left" onclick="change('tablet1', -1)">‚óÄ</button>
  <button class="right" onclick="change('tablet1', 1)">‚ñ∂</button>
</div>

<h2>Tablet 2</h2>
<div class="controls">
  <button class="left" onclick="change('tablet2', -1)">‚óÄ</button>
  <button class="right" onclick="change('tablet2', 1)">‚ñ∂</button>
</div>

<script>
const OWNER = "DenRowan";
const REPO = "remote-image-control";
const FILE_PATH = "state.json";
const MAX_INDEX = 11;

// üîë –í–°–¢–ê–í–ò–®–¨ –°–Æ–î–ê GITHUB TOKEN
const TOKEN = "PASTE_YOUR_TOKEN_HERE";

async function change(tablet, delta) {
  const apiUrl = `https://api.github.com/repos/${OWNER}/${REPO}/contents/${FILE_PATH}`;

  const res = await fetch(apiUrl, {
    headers: { Authorization: `token ${TOKEN}` }
  });
  const data = await res.json();

  const content = JSON.parse(atob(data.content));
  let index = content[tablet].index + delta;

  if (index < 1) index = 1;
  if (index > MAX_INDEX) index = MAX_INDEX;

  content[tablet].index = index;

  const updated = btoa(JSON.stringify(content, null, 2));

  await fetch(apiUrl, {
    method: "PUT",
    headers: {
      Authorization: `token ${TOKEN}`,
      "Content-Type": "application/json"
    },
    body: JSON.stringify({
      message: `Update ${tablet} to ${index}`,
      content: updated,
      sha: data.sha
    })
  });

  alert(`${tablet} ‚Üí img${String(index).padStart(2, "0")}.jpg`);
}
</script>

</body>
</html>
